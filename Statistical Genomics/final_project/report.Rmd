---
title: "Untitled"
author: "Tim Vigers"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "/Users/timvigers/GitHub/School/Statistical Genomics/final_project")
library(skimr)
library(nlme)
library(parallel)
library(tidyverse)
```

```{r include=FALSE}
# Import merged dataset
load("./data/final_data.RData")
```

```{r parallel}
# Cluster
cl = makeCluster(8,type = "FORK")
# All models in parallel
l = parLapply(cl,probes,function(p){
  mod = lme(as.formula(paste0(p,"~ clinage + SEX")),random = ~1|ID,df,na.action = na.omit)
  return(mod)
})
stopCluster(cl)
```